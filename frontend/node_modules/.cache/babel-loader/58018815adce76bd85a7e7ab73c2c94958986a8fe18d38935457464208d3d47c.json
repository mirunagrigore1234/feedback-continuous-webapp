{"ast":null,"code":"var _jsxFileName = \"D:\\\\Anul III\\\\TW\\\\feedback-continuous-webapp\\\\frontend\\\\src\\\\components\\\\activityInfo.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport feedbackService from \"../services/feedbackService\";\nimport activityService from \"../services/activityService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction timeAgo(ts) {\n  const d = new Date(ts);\n  const sec = Math.max(1, Math.floor((Date.now() - d.getTime()) / 1000));\n  if (sec < 60) return `${sec}s ago`;\n  const min = Math.floor(sec / 60);\n  if (min < 60) return `${min}m ago`;\n  const h = Math.floor(min / 60);\n  return `${h}h ago`;\n}\nconst EMOJI = {\n  happy: \"ðŸ˜„\",\n  surprised: \"ðŸ˜®\",\n  confused: \"ðŸ¤”\",\n  sad: \"ðŸ˜£\"\n};\n\n// helper: ia timestamp sigur\nfunction getTs(f) {\n  return new Date(f.Timestamp || f.timestamp || f.createdAt || f.created_at).getTime();\n}\n\n// helper: normalizeazÄƒ un feedback pt dedup\nfunction getKey(f) {\n  // dacÄƒ ai ID Ã®n backend, foloseÈ™te-l\n  const id = f.Id || f.id;\n  if (id != null) return `id:${id}`;\n  // fallback: emoÈ›ie + timestamp\n  return `t:${getTs(f)}|e:${(f.Emotion || f.emotion || \"\").toLowerCase()}`;\n}\nexport default function ActivityInfo() {\n  _s();\n  var _ref, _activity$Title, _ref2, _activity$AccessCode;\n  const nav = useNavigate();\n  const {\n    id\n  } = useParams();\n  const cacheKey = `classpulse_feedback_activity_${id}`;\n  const [activity, setActivity] = useState(null);\n\n  // porneÈ™te din cache, ca sÄƒ ai rapoarte È™i dupÄƒ end / refresh\n  const [feedback, setFeedback] = useState(() => {\n    try {\n      const raw = localStorage.getItem(cacheKey);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  });\n  const [error, setError] = useState(\"\");\n  const newestTs = useMemo(() => {\n    if (!feedback.length) return 0;\n    return Math.max(...feedback.map(getTs));\n  }, [feedback]);\n  const isEnded = (activity === null || activity === void 0 ? void 0 : activity.IsActive) === false || (activity === null || activity === void 0 ? void 0 : activity.isActive) === false || !!(activity !== null && activity !== void 0 && activity.EndedAt || activity !== null && activity !== void 0 && activity.endedAt) || newestTs > 0 && Date.now() - newestTs > 15 * 60 * 1000; // fallback frontend-only\n\n  // polling\n  useEffect(() => {\n    let stop = false;\n    async function loadActivity() {\n      try {\n        const a = await activityService.getActivityById(id);\n        if (!stop) setActivity(a);\n      } catch {\n        // nu e fatal\n      }\n    }\n    function saveCache(list) {\n      try {\n        localStorage.setItem(cacheKey, JSON.stringify(list));\n      } catch {\n        // ignore (storage full etc.)\n      }\n    }\n    function mergeDedup(prev, next) {\n      const map = new Map();\n      // pÄƒstreazÄƒ tot ce ai deja\n      for (const f of prev) map.set(getKey(f), f);\n      // adaugÄƒ ce vine nou\n      for (const f of next) map.set(getKey(f), f);\n\n      // sort desc dupÄƒ timp (pt feed)\n      const merged = Array.from(map.values()).sort((a, b) => getTs(b) - getTs(a));\n      return merged;\n    }\n    async function pollFeedback() {\n      try {\n        const list = await feedbackService.getFeedbacksByActivity(id);\n        if (stop) return;\n\n        // dacÄƒ backend Ã®ntoarce listÄƒ goalÄƒ dupÄƒ end, NU È™terge ce aveai\n        if (Array.isArray(list) && list.length > 0) {\n          setFeedback(prev => {\n            const merged = mergeDedup(prev, list);\n            saveCache(merged);\n            return merged;\n          });\n          setError(\"\");\n        } else {\n          // pÄƒstreazÄƒ feedback-urile existente/cached\n          setError(\"\");\n        }\n      } catch {\n        if (!stop) {\n          // dacÄƒ API picÄƒ dupÄƒ end, tot pÄƒstrezi datele vechi\n          setError(\"Cannot load feedback (showing last known results).\");\n        }\n      }\n    }\n    loadActivity();\n    pollFeedback();\n    const t = setInterval(pollFeedback, 2000);\n    return () => {\n      stop = true;\n      clearInterval(t);\n    };\n  }, [id]); // cacheKey depinde de id, dar e derivat\n\n  // calcule procentaje din ultimele 15 minute (live)\n  const stats = useMemo(() => {\n    const now = Date.now();\n    const relevant = isEnded ? feedback : feedback.filter(f => now - getTs(f) <= 15 * 60 * 1000);\n    const total = relevant.length || 1;\n    const counts = {\n      happy: 0,\n      confused: 0,\n      surprised: 0,\n      sad: 0\n    };\n    for (const f of relevant) {\n      const e = (f.Emotion || f.emotion || \"\").toLowerCase();\n      if (counts[e] !== undefined) counts[e]++;\n    }\n    const pct = x => Math.round(x * 100 / total);\n    return {\n      total: relevant.length,\n      happy: pct(counts.happy),\n      confused: pct(counts.confused),\n      surprised: pct(counts.surprised),\n      sad: pct(counts.sad)\n    };\n  }, [feedback, isEnded]);\n\n  // feed: ultimele 8 (desc)\n  const feed = useMemo(() => {\n    return [...feedback].sort((a, b) => getTs(b) - getTs(a)).slice(0, 8);\n  }, [feedback]);\n\n  // timeline: ultimele 15 min Ã®n 15 bucket-uri\n  const series = useMemo(() => {\n    const buckets = Array.from({\n      length: 15\n    }, () => ({\n      happy: 0,\n      confused: 0,\n      surprised: 0,\n      sad: 0,\n      total: 0\n    }));\n    const now = Date.now();\n    for (const f of feedback) {\n      const ts = getTs(f);\n      const diffMin = Math.floor((now - ts) / 60000);\n      if (diffMin < 0 || diffMin > 14) continue;\n      const idx = 14 - diffMin;\n      const e = (f.Emotion || f.emotion || \"\").toLowerCase();\n      if (buckets[idx] && buckets[idx][e] !== undefined) buckets[idx][e]++;\n      buckets[idx].total++;\n    }\n    return buckets.map(b => {\n      const t = b.total || 1;\n      return {\n        happy: b.happy / t,\n        surprised: b.surprised / t,\n        confused: b.confused / t,\n        sad: b.sad / t\n      };\n    });\n  }, [feedback]);\n  const title = (_ref = (_activity$Title = activity === null || activity === void 0 ? void 0 : activity.Title) !== null && _activity$Title !== void 0 ? _activity$Title : activity === null || activity === void 0 ? void 0 : activity.title) !== null && _ref !== void 0 ? _ref : \"Activity\";\n  const code = (_ref2 = (_activity$AccessCode = activity === null || activity === void 0 ? void 0 : activity.AccessCode) !== null && _activity$AccessCode !== void 0 ? _activity$AccessCode : activity === null || activity === void 0 ? void 0 : activity.access_code) !== null && _ref2 !== void 0 ? _ref2 : \"\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"aWrap\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"aSide\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aBrand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aLogo\",\n          children: \"\\uD83C\\uDF93\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"ClassPulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"aNewBtn\",\n        onClick: () => nav(\"/professor/dashboard\"),\n        children: \"\\uFF0B Create New Session\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"aMain\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aTop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aHeader\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aLiveRow\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"aLivePill\",\n            children: isEnded ? \"ENDED\" : \"LIVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"aElapsed\",\n            children: [\"\\xB7 \", isEnded ? \"session\" : \"last 15 min\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"aTitle\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aMeta\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\uD83D\\uDD11 Code: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: code || \"â€”\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 16\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errorBox\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aStatGrid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aStatCard blue\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aStatLabel\",\n              children: \"UNDERSTANDING\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aMiniEmoji\",\n              children: \"\\uD83D\\uDE04\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatValue\",\n            children: [stats.happy, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aStatCard purple\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aStatLabel\",\n              children: \"CONFUSED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aMiniEmoji\",\n              children: \"\\uD83E\\uDD14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatValue\",\n            children: [stats.confused, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aStatCard yellow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aStatLabel\",\n              children: \"SURPRISED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aMiniEmoji\",\n              children: \"\\uD83D\\uDE2E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatValue\",\n            children: [stats.surprised, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"aStatCard red\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aStatLabel\",\n              children: \"LOST\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aMiniEmoji\",\n              children: \"\\uD83D\\uDE23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aStatValue\",\n            children: [stats.sad, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aBottomGrid\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"aCard\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aCardTitle\",\n            children: \"Live Sentiment Timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mutedSmall\",\n            children: \"Real-time student reactions over the last 15 minutes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aLegend\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"legDot blueDot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 21\n              }, this), \" Happy\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"legDot yellowDot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this), \" Surprised\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"legDot purpleDot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this), \" Confused\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"legDot redDot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 21\n              }, this), \" Lost\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aChart\",\n            children: series.map((p, idx) => {\n              const h1 = Math.round(p.happy * 100);\n              const h2 = Math.round(p.surprised * 100);\n              const h3 = Math.round(p.confused * 100);\n              const h4 = Math.round(p.sad * 100);\n              const max = Math.max(h1, h2, h3, h4);\n              let cls = \"blueBar\";\n              if (max === h2) cls = \"yellowBar\";else if (max === h3) cls = \"purpleBar\";else if (max === h4) cls = \"redBar\";\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aCol\",\n                title: `bucket ${idx + 1}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `aBar ${cls}`,\n                  style: {\n                    height: `${max}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this)\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aChartAxis\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"14:45\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"14:50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"14:55\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"15:00 (NOW)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"aCard\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aFeedTop\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aCardTitle\",\n                children: \"Live Feed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mutedSmall\",\n                children: \"Latest reactions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"aGreenDot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aFeedList\",\n            children: feed.map((f, i) => {\n              var _getKey;\n              const emo = (f.Emotion || f.emotion || \"happy\").toLowerCase();\n              const ts = f.Timestamp || f.timestamp || f.createdAt;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aFeedRow\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aFeedEmoji\",\n                  children: EMOJI[emo] || \"ðŸ™‚\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aFeedText\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"aFeedTitle\",\n                    children: \"Anonymous Student\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"aFeedSub\",\n                    children: [\"Reacted \", /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: [\"\\\"\", emo, \"\\\"\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"aFeedTime\",\n                  children: timeAgo(ts)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 21\n                }, this)]\n              }, (_getKey = getKey(f)) !== null && _getKey !== void 0 ? _getKey : i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n}\n_s(ActivityInfo, \"XaNR82r/W/fSVW+Cmdws0MOuJSY=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = ActivityInfo;\nvar _c;\n$RefreshReg$(_c, \"ActivityInfo\");","map":{"version":3,"names":["useEffect","useMemo","useState","useNavigate","useParams","feedbackService","activityService","jsxDEV","_jsxDEV","timeAgo","ts","d","Date","sec","Math","max","floor","now","getTime","min","h","EMOJI","happy","surprised","confused","sad","getTs","f","Timestamp","timestamp","createdAt","created_at","getKey","id","Id","Emotion","emotion","toLowerCase","ActivityInfo","_s","_ref","_activity$Title","_ref2","_activity$AccessCode","nav","cacheKey","activity","setActivity","feedback","setFeedback","raw","localStorage","getItem","JSON","parse","error","setError","newestTs","length","map","isEnded","IsActive","isActive","EndedAt","endedAt","stop","loadActivity","a","getActivityById","saveCache","list","setItem","stringify","mergeDedup","prev","next","Map","set","merged","Array","from","values","sort","b","pollFeedback","getFeedbacksByActivity","isArray","t","setInterval","clearInterval","stats","relevant","filter","total","counts","e","undefined","pct","x","round","feed","slice","series","buckets","diffMin","idx","title","Title","code","AccessCode","access_code","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","p","h1","h2","h3","h4","cls","style","height","i","_getKey","emo","_c","$RefreshReg$"],"sources":["D:/Anul III/TW/feedback-continuous-webapp/frontend/src/components/activityInfo.jsx"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport feedbackService from \"../services/feedbackService\";\r\nimport activityService from \"../services/activityService\";\r\n\r\nfunction timeAgo(ts) {\r\n  const d = new Date(ts);\r\n  const sec = Math.max(1, Math.floor((Date.now() - d.getTime()) / 1000));\r\n  if (sec < 60) return `${sec}s ago`;\r\n  const min = Math.floor(sec / 60);\r\n  if (min < 60) return `${min}m ago`;\r\n  const h = Math.floor(min / 60);\r\n  return `${h}h ago`;\r\n}\r\n\r\nconst EMOJI = {\r\n  happy: \"ðŸ˜„\",\r\n  surprised: \"ðŸ˜®\",\r\n  confused: \"ðŸ¤”\",\r\n  sad: \"ðŸ˜£\"\r\n};\r\n\r\n// helper: ia timestamp sigur\r\nfunction getTs(f) {\r\n  return new Date(f.Timestamp || f.timestamp || f.createdAt || f.created_at).getTime();\r\n}\r\n\r\n// helper: normalizeazÄƒ un feedback pt dedup\r\nfunction getKey(f) {\r\n  // dacÄƒ ai ID Ã®n backend, foloseÈ™te-l\r\n  const id = f.Id || f.id;\r\n  if (id != null) return `id:${id}`;\r\n  // fallback: emoÈ›ie + timestamp\r\n  return `t:${getTs(f)}|e:${(f.Emotion || f.emotion || \"\").toLowerCase()}`;\r\n}\r\n\r\nexport default function ActivityInfo() {\r\n  const nav = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  const cacheKey = `classpulse_feedback_activity_${id}`;\r\n\r\n  const [activity, setActivity] = useState(null);\r\n\r\n  // porneÈ™te din cache, ca sÄƒ ai rapoarte È™i dupÄƒ end / refresh\r\n  const [feedback, setFeedback] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem(cacheKey);\r\n      return raw ? JSON.parse(raw) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n);\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const newestTs = useMemo(() => {\r\n  if (!feedback.length) return 0;\r\n  return Math.max(...feedback.map(getTs));\r\n}, [feedback]);\r\n\r\nconst isEnded =\r\n  (activity?.IsActive === false) ||\r\n  (activity?.isActive === false) ||\r\n  !!(activity?.EndedAt || activity?.endedAt) ||\r\n  (newestTs > 0 && Date.now() - newestTs > 15 * 60 * 1000); // fallback frontend-only\r\n\r\n  // polling\r\n  useEffect(() => {\r\n    let stop = false;\r\n\r\n    async function loadActivity() {\r\n      try {\r\n        const a = await activityService.getActivityById(id);\r\n        if (!stop) setActivity(a);\r\n      } catch {\r\n        // nu e fatal\r\n      }\r\n    }\r\n\r\n    function saveCache(list) {\r\n      try {\r\n        localStorage.setItem(cacheKey, JSON.stringify(list));\r\n      } catch {\r\n        // ignore (storage full etc.)\r\n      }\r\n    }\r\n\r\n    function mergeDedup(prev, next) {\r\n      const map = new Map();\r\n      // pÄƒstreazÄƒ tot ce ai deja\r\n      for (const f of prev) map.set(getKey(f), f);\r\n      // adaugÄƒ ce vine nou\r\n      for (const f of next) map.set(getKey(f), f);\r\n\r\n      // sort desc dupÄƒ timp (pt feed)\r\n      const merged = Array.from(map.values()).sort((a, b) => getTs(b) - getTs(a));\r\n      return merged;\r\n    }\r\n\r\n    async function pollFeedback() {\r\n      try {\r\n        const list = await feedbackService.getFeedbacksByActivity(id);\r\n\r\n        if (stop) return;\r\n\r\n        // dacÄƒ backend Ã®ntoarce listÄƒ goalÄƒ dupÄƒ end, NU È™terge ce aveai\r\n        if (Array.isArray(list) && list.length > 0) {\r\n          setFeedback((prev) => {\r\n            const merged = mergeDedup(prev, list);\r\n            saveCache(merged);\r\n            return merged;\r\n          });\r\n          setError(\"\");\r\n        } else {\r\n          // pÄƒstreazÄƒ feedback-urile existente/cached\r\n          setError(\"\");\r\n        }\r\n      } catch {\r\n        if (!stop) {\r\n          // dacÄƒ API picÄƒ dupÄƒ end, tot pÄƒstrezi datele vechi\r\n          setError(\"Cannot load feedback (showing last known results).\");\r\n        }\r\n      }\r\n    }\r\n\r\n    loadActivity();\r\n    pollFeedback();\r\n\r\n    const t = setInterval(pollFeedback, 2000);\r\n    return () => {\r\n      stop = true;\r\n      clearInterval(t);\r\n    };\r\n  }, [id]); // cacheKey depinde de id, dar e derivat\r\n\r\n  // calcule procentaje din ultimele 15 minute (live)\r\nconst stats = useMemo(() => {\r\n  const now = Date.now();\r\n\r\n  const relevant = isEnded\r\n    ? feedback\r\n    : feedback.filter((f) => now - getTs(f) <= 15 * 60 * 1000);\r\n\r\n  const total = relevant.length || 1;\r\n  const counts = { happy: 0, confused: 0, surprised: 0, sad: 0 };\r\n\r\n  for (const f of relevant) {\r\n    const e = (f.Emotion || f.emotion || \"\").toLowerCase();\r\n    if (counts[e] !== undefined) counts[e]++;\r\n  }\r\n\r\n  const pct = (x) => Math.round((x * 100) / total);\r\n  return {\r\n    total: relevant.length,\r\n    happy: pct(counts.happy),\r\n    confused: pct(counts.confused),\r\n    surprised: pct(counts.surprised),\r\n    sad: pct(counts.sad)\r\n  };\r\n}, [feedback, isEnded]);\r\n\r\n  // feed: ultimele 8 (desc)\r\n  const feed = useMemo(() => {\r\n    return [...feedback]\r\n      .sort((a, b) => getTs(b) - getTs(a))\r\n      .slice(0, 8);\r\n  }, [feedback]);\r\n\r\n  // timeline: ultimele 15 min Ã®n 15 bucket-uri\r\n  const series = useMemo(() => {\r\n    const buckets = Array.from({ length: 15 }, () => ({\r\n      happy: 0, confused: 0, surprised: 0, sad: 0, total: 0\r\n    }));\r\n\r\n    const now = Date.now();\r\n\r\n    for (const f of feedback) {\r\n      const ts = getTs(f);\r\n      const diffMin = Math.floor((now - ts) / 60000);\r\n      if (diffMin < 0 || diffMin > 14) continue;\r\n\r\n      const idx = 14 - diffMin;\r\n      const e = (f.Emotion || f.emotion || \"\").toLowerCase();\r\n      if (buckets[idx] && buckets[idx][e] !== undefined) buckets[idx][e]++;\r\n      buckets[idx].total++;\r\n    }\r\n\r\n    return buckets.map((b) => {\r\n      const t = b.total || 1;\r\n      return {\r\n        happy: b.happy / t,\r\n        surprised: b.surprised / t,\r\n        confused: b.confused / t,\r\n        sad: b.sad / t\r\n      };\r\n    });\r\n  }, [feedback]);\r\n\r\n  const title = activity?.Title ?? activity?.title ?? \"Activity\";\r\n  const code = activity?.AccessCode ?? activity?.access_code ?? \"\";\r\n\r\n  return (\r\n    <div className=\"aWrap\">\r\n      {/* Sidebar */}\r\n      <aside className=\"aSide\">\r\n        <div className=\"aBrand\">\r\n          <div className=\"aLogo\">ðŸŽ“</div>\r\n          <b>ClassPulse</b>\r\n        </div>\r\n\r\n        <button className=\"aNewBtn\" onClick={() => nav(\"/professor/dashboard\")}>\r\n          ï¼‹ Create New Session\r\n        </button>\r\n\r\n      </aside>\r\n\r\n      {/* Main */}\r\n      <main className=\"aMain\">\r\n        <div className=\"aTop\">\r\n\r\n        </div>\r\n\r\n        <div className=\"aHeader\">\r\n        <div className=\"aLiveRow\">\r\n          <span className=\"aLivePill\">\r\n            {isEnded ? \"ENDED\" : \"LIVE\"}\r\n          </span>\r\n          <span className=\"aElapsed\">\r\n            Â· {isEnded ? \"session\" : \"last 15 min\"}\r\n          </span>\r\n        </div>\r\n\r\n  <h1 className=\"aTitle\">{title}</h1>\r\n\r\n  <div className=\"aMeta\">\r\n    <span>\r\n      ðŸ”‘ Code: <b>{code || \"â€”\"}</b>\r\n    </span>\r\n  </div>\r\n\r\n\r\n</div>\r\n        {error && <div className=\"errorBox\">{error}</div>}\r\n\r\n        {/* Stat cards */}\r\n        <div className=\"aStatGrid\">\r\n          <div className=\"aStatCard blue\">\r\n            <div className=\"aStatTop\">\r\n              <span className=\"aStatLabel\">UNDERSTANDING</span>\r\n              <span className=\"aMiniEmoji\">ðŸ˜„</span>\r\n            </div>\r\n            <div className=\"aStatValue\">{stats.happy}%</div>\r\n          </div>\r\n\r\n          <div className=\"aStatCard purple\">\r\n            <div className=\"aStatTop\">\r\n              <span className=\"aStatLabel\">CONFUSED</span>\r\n              <span className=\"aMiniEmoji\">ðŸ¤”</span>\r\n            </div>\r\n            <div className=\"aStatValue\">{stats.confused}%</div>\r\n          </div>\r\n\r\n          <div className=\"aStatCard yellow\">\r\n            <div className=\"aStatTop\">\r\n              <span className=\"aStatLabel\">SURPRISED</span>\r\n              <span className=\"aMiniEmoji\">ðŸ˜®</span>\r\n            </div>\r\n            <div className=\"aStatValue\">{stats.surprised}%</div>\r\n          </div>\r\n\r\n          <div className=\"aStatCard red\">\r\n            <div className=\"aStatTop\">\r\n              <span className=\"aStatLabel\">LOST</span>\r\n              <span className=\"aMiniEmoji\">ðŸ˜£</span>\r\n            </div>\r\n            <div className=\"aStatValue\">{stats.sad}%</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline + Feed */}\r\n        <div className=\"aBottomGrid\">\r\n          <section className=\"aCard\">\r\n            <div className=\"aCardTitle\">Live Sentiment Timeline</div>\r\n            <div className=\"mutedSmall\">\r\n              Real-time student reactions over the last 15 minutes\r\n            </div>\r\n\r\n            <div className=\"aLegend\">\r\n              <span><i className=\"legDot blueDot\" /> Happy</span>\r\n              <span><i className=\"legDot yellowDot\" /> Surprised</span>\r\n              <span><i className=\"legDot purpleDot\" /> Confused</span>\r\n              <span><i className=\"legDot redDot\" /> Lost</span>\r\n            </div>\r\n\r\n            <div className=\"aChart\">\r\n              {series.map((p, idx) => {\r\n                const h1 = Math.round(p.happy * 100);\r\n                const h2 = Math.round(p.surprised * 100);\r\n                const h3 = Math.round(p.confused * 100);\r\n                const h4 = Math.round(p.sad * 100);\r\n\r\n                const max = Math.max(h1, h2, h3, h4);\r\n                let cls = \"blueBar\";\r\n                if (max === h2) cls = \"yellowBar\";\r\n                else if (max === h3) cls = \"purpleBar\";\r\n                else if (max === h4) cls = \"redBar\";\r\n\r\n                return (\r\n                  <div className=\"aCol\" key={idx} title={`bucket ${idx + 1}`}>\r\n                    <div className={`aBar ${cls}`} style={{ height: `${max}%` }} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            <div className=\"aChartAxis\">\r\n              <span>14:45</span>\r\n              <span>14:50</span>\r\n              <span>14:55</span>\r\n              <span>15:00 (NOW)</span>\r\n            </div>\r\n          </section>\r\n\r\n          <section className=\"aCard\">\r\n            <div className=\"aFeedTop\">\r\n              <div>\r\n                <div className=\"aCardTitle\">Live Feed</div>\r\n                <div className=\"mutedSmall\">Latest reactions</div>\r\n              </div>\r\n              <span className=\"aGreenDot\" />\r\n            </div>\r\n\r\n            <div className=\"aFeedList\">\r\n              {feed.map((f, i) => {\r\n                const emo = (f.Emotion || f.emotion || \"happy\").toLowerCase();\r\n                const ts = f.Timestamp || f.timestamp || f.createdAt;\r\n                return (\r\n                  <div className=\"aFeedRow\" key={getKey(f) ?? i}>\r\n                    <div className=\"aFeedEmoji\">{EMOJI[emo] || \"ðŸ™‚\"}</div>\r\n                    <div className=\"aFeedText\">\r\n                      <div className=\"aFeedTitle\">Anonymous Student</div>\r\n                      <div className=\"aFeedSub\">\r\n                        Reacted <b>\"{emo}\"</b>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"aFeedTime\">{timeAgo(ts)}</div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}